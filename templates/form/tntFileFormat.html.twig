{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- CSS only -->
    {# <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"> #}

    <style>
        .address form {
            /*margin: auto;*/
            padding: 5% 0 5% 0;
            /*width: auto;*/
        }

        .flash-success {
            margin-bottom: 5%;
            padding: 0 5% 0 5%;
            background-color: #1b9448;
        }

        .flash-error {
            margin-bottom: 5%;
            padding: 0 5% 0 5%;
            background-color: #761c19;
        }

        form .invoice .leftCol {
            width: 33%;
            float: left;
        }

        form .invoice .rightCol {
            width: 60%;
            float: right;
        }

        form .dangerousGoods .leftCol {
            width: 33%;
            float: left;
        }

        form .dangerousGoods .rightCol {
            width: 60%;
            float: right;
        }

        form .duty .leftCol {
            width: 33%;
            float: left;
        }

        form .duty .rightCol {
            width: 60%;
            float: right;
        }

        form .dimensions .leftCol {
            width: 33%;
            float: left;
        }

        form .dimensions .middleCol {
            width: 33%;
            float: right;
        }

        form .dimensions .rightCol {
            width: 33%;
            float: right;
        }

    </style>
{% endblock %}

{% block title %}TNT create{% endblock %}

{% block body %}
    <div class="container address form">
        {{ form_start(form) }}
        {% for label, messages in app.flashes(['success', 'error']) %}
            {% for message in messages %}
                <div class="flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        <div class="row">
            <div class="col-sm">
                {% block customerArea %}
                    <div class="form-group">
                        {{ form_label(form.customerNumber) }}
                        {{ form_widget(form.customerNumber) }}
                    </div>

                    {% block invoice %}
                        {{ include('form/invoice.html.twig', {childForm: form.invoice}) }}
                    {% endblock invoice %}

                    <div class="form-group">
                        {{ form_label(form.customerInformation) }}
                        {{ form_widget(form.customerInformation) }}
                    </div>

                {% endblock customerArea %}
                <div class="accordion" id="accordion">
                    {% block changeAddress %}
                        {{ include('form/address.html.twig', {childForm: form.changeAddress, area: 'One', headerName: 'Change-Address', stateShow: 'true'}) }}
                    {% endblock changeAddress %}
                    {% block receiverAddress %}
                        {{ include('form/address.html.twig', {childForm: form.receiverAddress, area: 'Two', headerName: 'Receiver-Address', stateShow: 'false'}) }}
                    {% endblock receiverAddress %}
                    {% block deliveryAddress %}
                        {{ include('form/address.html.twig', {childForm: form.deliveryAddress, area: 'Three', headerName: 'Delivery-Address', stateShow: 'false'}) }}
                    {% endblock deliveryAddress %}
                </div>
                    {% block dangerousGoods %}
                        {{ include('form/dangerousGoods.html.twig', {childForm: form.dangerousGoods}) }}
                    {% endblock dangerousGoods %}
            </div>
            <div class="col-sm">
                 <div class="row">
                    <div class="col-md">
                    {% block service %}
                        {{ include('form/service.html.twig', {childForm: form.services}) }}
                    {% endblock service %}
                    </div>
                    <div class="col-sm">
                    {% block option %}
                        <div class="form-group">
                            {{ form_label(form.options.priority.priority) }}
                            {{ form_widget(form.options.priority.priority) }}

                            {{ form_label(form.options.insurance.insurance) }}
                            {{ form_widget(form.options.insurance.insurance) }}

                            {{ form_label(form.options.insurance.goodsValue) }}
                            {{ form_widget(form.options.insurance.goodsValue) }}

                        </div>
                    {% endblock option %}
                    </div>
                </div>
                <div class="form-group">
                    {{ form_label(form.specialNotes) }}
                    {{ form_widget(form.specialNotes) }}
                </div>
                <div class="accordion" id="accordionTable">
                    <div class="card">
                        <div class="card-header" id="headingTable">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseTable" aria-expanded="true" aria-controls="collapseTable">
                                    Goods Table
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTable" class="collapse show" aria-labelledby="headingTable" data-parent="#accordionTable">
                            <div class="card-body">
                                {% block goodsTable %}
                                    {{ include('form/table/goodstable.html.twig', {childForm: form.goodsTable}) }}
                                {% endblock goodsTable %}
                            </div>
                        </div>
                    </div>
                </div>
                {% block duty %}
                    {{ include('form/duty.html.twig', {childForm: form.duty}) }}
                {% endblock duty %}
            </div>
        </div>
        <div class="footer form">

        {{ form_widget(form._token) }}
        {# <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}" > #}

        {{ form_widget(form.create) }}

        {{ form_end(form, {'render_rest': false}) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {# <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> #}
    <!-- JavaScript Bundle with Popper -->
{#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>#}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script>
        function calculatorPiece() {
            var totalPiece = document.getElementsByClassName('totalPiece')[0];
            var goodsPiece = document.getElementsByClassName('goodsPiece');

            var calValue = 0;
            for (i = 0; i < goodsPiece.length; i++) {
                calValue += goodsPiece[i].value * 1;
            }
            totalPiece.value = calValue;
        }

        function calculatorWeight() {
            var totalWeight = document.getElementsByClassName('totalWeight')[0];
            var goodsWeight = document.getElementsByClassName('goodsWeight');

            var calValue = 0;
            for (i = 0; i < goodsWeight.length; i++) {
                calValue += goodsWeight[i].value.replace(',','.') * 1;
            }
            totalWeight.value = calValue.toFixed(2);
        }
    </script>
{% endblock %}